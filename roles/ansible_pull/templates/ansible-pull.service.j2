[Unit]
Description=Ansible Pull Workstation Configuration
Documentation={{ homelab_ansible_repo_url }}
After=network-online.target
Wants=network-online.target

[Service]
Type=oneshot
User=root
WorkingDirectory={{ playbook_path }}
ExecStart={{ ansible_pull_path }} \
    --limit localhost \
    --accept-host-key \
    --directory {{ playbook_path }} \
    --url {{ homelab_ansible_repo_url }} \
    {{ ansible_hostname }}.yml
StandardOutput=append:/var/log/ansible-pull/ansible-pull.log
StandardError=append:/var/log/ansible-pull/ansible-pull-error.log
Environment=ANSIBLE_LOG_PATH=/var/log/ansible-pull/ansible-pull.log

[Install]
WantedBy=multi-user.target